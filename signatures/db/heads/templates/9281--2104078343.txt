template<class T> T** malloc2D(int rows, int cols, T) { T **p = (T**)malloc(sizeof(T)*(rows*cols) + sizeof(T*)*rows); T* buf = (T*)(p + rows); for(int i = 0; i < rows; i++) {p[i] = buf + i*cols;} return p;}